{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/weiwenxu/COMP/github/react/reactBootcamp/crafts/client/src/App.js\";\nimport React, { Component } from 'react';\nimport Spinner from './Spinner';\nimport Images from './Images';\nimport Buttons from './Buttons';\nimport { API_URL } from './config';\nimport './App.css';\nimport * as Vibrant from 'node-vibrant';\n\nfunction sampleColor(image) {\n  // Using builder\n  // Vibrant.from(image.secure_url).getPalette((err, palette) => console.log(palette))\n  if (image.length > 0) {\n    var v = new Vibrant(image.secure_url, {\n      quality: 1\n    });\n    return v;\n  }\n\n  return [];\n}\n\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      uploading: false,\n      images: [],\n      color: []\n    };\n\n    this.onChange = e => {\n      const files = Array.from(e.target.files);\n      this.setState({\n        uploading: true\n      });\n      const formData = new FormData();\n      files.forEach((file, i) => {\n        formData.append(i, file);\n      });\n      fetch(`${API_URL}/image-upload`, {\n        method: 'POST',\n        body: formData\n      }).then(res => res.json()).then(images => {\n        this.setState({\n          uploading: false,\n          images,\n          color: sampleColor(images).getPalette().then(palette => console.log(palette))\n        });\n      });\n    };\n\n    this.removeImage = id => {\n      this.setState({\n        images: this.state.images.filter(image => image.public_id !== id)\n      });\n    };\n  }\n\n  render() {\n    const {\n      uploading,\n      images\n    } = this.state;\n\n    const content = () => {\n      switch (true) {\n        case uploading:\n          return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 18\n          }, this);\n\n        case images.length > 0:\n          return /*#__PURE__*/_jsxDEV(Images, {\n            images: images,\n            removeImage: this.removeImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 18\n          }, this);\n\n        default:\n          return /*#__PURE__*/_jsxDEV(Buttons, {\n            onChange: this.onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 18\n          }, this);\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: content()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/weiwenxu/COMP/github/react/reactBootcamp/crafts/client/src/App.js"],"names":["React","Component","Spinner","Images","Buttons","API_URL","Vibrant","sampleColor","image","length","v","secure_url","quality","App","state","uploading","images","color","onChange","e","files","Array","from","target","setState","formData","FormData","forEach","file","i","append","fetch","method","body","then","res","json","getPalette","palette","console","log","removeImage","id","filter","public_id","render","content"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Spinner from './Spinner';\nimport Images from './Images';\nimport Buttons from './Buttons';\nimport { API_URL } from './config';\nimport './App.css';\nimport * as Vibrant from 'node-vibrant'\n\nfunction sampleColor(image) {\n  // Using builder\n  // Vibrant.from(image.secure_url).getPalette((err, palette) => console.log(palette))\n  if(image.length > 0){\n    var v = new Vibrant(image.secure_url,{quality:1});\n    return v\n  }\n  return [];\n}\n\nexport default class App extends Component {\n\n  state = {\n    uploading: false,\n    images: [],\n    color: []\n  }\n\n  onChange = e => {\n    const files = Array.from(e.target.files)\n    this.setState({ uploading: true })\n\n    const formData = new FormData()\n\n    files.forEach((file, i) => {\n      formData.append(i, file)\n    })\n\n    fetch(`${API_URL}/image-upload`, {\n      method: 'POST',\n      body: formData\n    })\n    .then(res => res.json())\n    .then(images => {\n      this.setState({\n        uploading: false,\n        images,\n        color: sampleColor(images).getPalette().then((palette) => console.log(palette))\n      })\n    })\n  }\n\n  removeImage = id => {\n    this.setState({\n      images: this.state.images.filter(image => image.public_id !== id)\n    })\n  }\n\n  render() {\n    const { uploading, images } = this.state\n\n    const content = () => {\n      switch(true) {\n        case uploading:\n          return <Spinner />\n        case images.length > 0:\n          return <Images images={images} removeImage={this.removeImage} />\n        default:\n          return <Buttons onChange={this.onChange} />\n      }\n    }\n\n    return (\n      <div>\n        <div className='buttons'>\n          {content()}\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}